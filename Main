from Load import *
pygame.init()

screen = pygame.display.set_mode((1200,800))
screenidentity=1
charselectvar=1
Name = ''
Name_rect = pygame.Rect(215,570,230,35)
color = color_passive
active = False
game_beaten=False
def windowdraw(number):
    number=number
    if number==1:
        screen.fill((0, 0, 0))
        screen.blit(main_screen_bg, [0, 0])
        for i in range(len(mainmenubuttons)):
            mainmenubuttons[i].draw(screen)
    if number==2:
        screen.fill((125,255,255))
        screen.blit(abilityheader, (500, 340))
        screen.blit(maintext,(180,100))
        finishbutton.draw(screen)
        charselectbutton.draw(screen)
        backbutton.draw(screen)
        for i in range(4):
            if charselectvar == i+1:
                if i+1 != 4 or game_beaten == True:
                    for j in range(6):
                        screen.blit(heroes[i][j],charscreencoords[j])
            if charselectvar == 4 and game_beaten == False:
                screen.blit(secretabilitytext, (600, 340))
                screen.blit(scaled_secret_man, (150, 220))
                screen.blit(scaled_secret_shield, (500, 253))
                screen.blit(scaled_secret_icon, (670, 214))
    if number==3:
        screen.fill((0,0,0))
        backbutton.draw(screen)
    if number==4:
        screen.fill((0,0,0))


running = True

while running:
    for event in pygame.event.get():
        pos = pygame.mouse.get_pos()
        if event.type == pygame.QUIT:
            running = False
        if event.type == pygame.KEYDOWN:
            if active == True:
                if event.key == pygame.K_BACKSPACE:
                    Name = Name[:-1]
                elif event.key== pygame.K_RETURN:
                    active=False
                elif len(Name) < 10:
                    Name += event.unicode
        if active == False:
            color = color_passive
        else:
            color = color_active
        Namebox = typing_font.render(Name,True,color)
        if event.type == pygame.MOUSEBUTTONDOWN:
            if Name_rect.collidepoint(event.pos):
                active = True
            else:
                active = False
            if startbutton.isOver(pos) and screenidentity == 1:
                screenidentity=2
            if continuebutton.isOver(pos) and screenidentity == 1:
                screenidentity=2
            if quitbutton.isOver(pos) and screenidentity == 1:
                running = False
            if achievementbutton.isOver(pos) and screenidentity == 1:
                screenidentity=3

            if charselectbutton.isOver(pos) and screenidentity == 2:
                if charselectvar == 4:
                    charselectvar = 0
                charselectvar += 1
            if backbutton.isOver(pos) and screenidentity == 2:
                screenidentity= 1
            if backbutton.isOver(pos) and screenidentity == 3:
                screenidentity= 1
            if finishbutton.isOver(pos) and screenidentity==2:
                screenidentity= 4

        if event.type == pygame.MOUSEMOTION:
            for i in range(len(mainmenubuttons)):
                if mainmenubuttons[i].isOver(pos):
                    mainmenubuttons[i].color = (255,226,68)
                else:
                    mainmenubuttons[i].color = (125,255,255)

            if charselectbutton.isOver(pos):
                charselectbutton.color = (200,200,200)
            else:
                charselectbutton.color = (255,255,255)
            if backbutton.isOver(pos):
                backbutton.color = (200,200,200)
            else:
                backbutton.color = (255,255,255)
            if finishbutton.isOver(pos):
                finishbutton.color = (200,200,200)
            else:
                finishbutton.color = (255, 255, 255)


    windowdraw(screenidentity)
    if screenidentity == 2:
        Name_rect.w = max(230,Namebox.get_width()+10)
        screen.blit(Namebox, (Name_rect.x+5,Name_rect.y))
        pygame.draw.rect(screen,color,Name_rect,2)
    pygame.display.update()
